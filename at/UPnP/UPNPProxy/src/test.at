import ~.net.suztomo.at.upnp.upnp;

import /.at.lang.futures;

/*
whenUPnP: "urn:schemas-upnp-org:service:Layer3Forwarding:1" discovered: {|p|
    // p<-print(string) style is more preferable.
    when: (p<-sendUPnPMessage("GetDefaultConnectionService", "some string")) becomes: {|res|
            system.println("async result returned! " + res);
        
    };
    when: (p<-getActionNames()) becomes: { |actions|
            system.println("action names " + actions);
    };
}
*/
/*
whenUPnP: "urn:schemas-upnp-org:service:RenderingControl:1" discovered: {|p|
    when: (p<-getActionNames()) becomes: { |actions|
            system.println("action names " + actions);
        foreach: {|a| system.println("  " + a); } in: actions;
    };
}
*/
wheneverUPnP: ANY_UPNP_SERVICE discovered: {|p|
        when: (p<-getServiceType()) becomes: {|type|
            when: (p<-getActionNames()) becomes: { |actions|
                system.println("Service: " + type);
                foreach: {|a| system.println("  " + a); } in: actions;
        }
    };
}


/*
deftype Printer;

when: Printer discovered: {|p|
        system.println("printer found");
};


def a := actor: {
    def service := object: { 
        def print(aDoc) {
            system.println("printing " +aDoc);
        }
    };
    export: self as: Printer;
}


*/